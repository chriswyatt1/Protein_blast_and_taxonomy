process {

  executor='sge'

  //beforeScript = 'source $HOME/.bashrc;module unload compilers/intel/2018/update3;module unload mpi/intel/2018/update3/intel;module unload java/1.8.0_45;module add r/recommended';
  echo = true
  
  //withName: GET_DATA { module = [ 'module add r/recommended' ] }
  
  shell = ['/bin/bash','-e']
  withLabel: "download" {
    clusterOptions = '-l mem=50G -l h_rt=8:0:0 -l tmpfs=400G'
    cpus = 1
  }
  withLabel: "blast" {
    penv = "smp"
    cpus = 6
    container = 'chriswyatt/diamond'
    clusterOptions = '-l mem=20G -l h_rt=4:0:0 -l tmpfs=200G'
  }
   withLabel: "blastdb" {
    penv = "smp"
    cpus = 4
    clusterOptions = '-l mem=2G -l h_rt=8:0:0 -l tmpfs=400G'
    container = 'chriswyatt/diamond'
  }
  withLabel: "perl_pie" {
    cpus = 1
    clusterOptions = '-l mem=2G -l h_rt=0:20:0 -l tmpfs=2G'
    container = 'chriswyatt/perl_r_e1071'
  }
  withLabel: "transdecoder" {
    cpus = 1
    clusterOptions = '-l mem=2G -l h_rt=1:30:0 -l tmpfs=2G'
    container = 'chriswyatt/transdecoder'
  }

  singularity.enabled = true
  singularity.autoMounts = true 

}
